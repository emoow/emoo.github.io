<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Nosifer&family=UnifrakturMaguntia&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <style>
    .info-page {
      opacity: 0;
      transition: opacity 1s ease-in;
      /* keep display: flex or block as needed */
    }
    .info-page.active {
      opacity: 1;
    }

    #hangman-image-section img {
      position: absolute;
      bottom: 10%;
      right: 5%;
      transform: none;
      width: 50%;
      max-width: 200px;
    }

    #letter-input {
      border: none;
      background: none;
      outline: none;
      color: antiquewhite;
      font-size: 60px;
      width: 50px;
      text-align: center;
    }

    #word-display span {
      cursor: pointer;
    }

    body {
      background: linear-gradient(135deg, #a259e6 0%, #258317 100%);
    }
  </style>
</head>
<body>
  <div class="background-light"></div>
  <div class="liquid-glass"></div>

  
  <!-- Bubble Container -->
  <div id="bubbleContainer" style="position:fixed; left:0; top:0; width:100vw; height:100vh; z-index:10; pointer-events:none;"></div>
  <!-- Bubble Canvas (background only, not interactive) -->
  <canvas id="bubbleCanvas" style="position:fixed; left:0; top:0; width:100vw; height:100vh; z-index:2; pointer-events:none;"></canvas>

  <script>
    // Bubble animation logic (HTML bubbles)
    const bubbleLabels = ["contact", "resume", "music", "projects", "info", "opponent"];
    const colors = ["#a259e6", "#f672a7", "#5adbb5", "#ffe066", "#6a89cc", "#ff7675"];
    const bubbleContainer = document.getElementById('bubbleContainer');
    const radius = 48;
    let bubbles = [];
    let dpr = window.devicePixelRatio || 1;

    function createBubble(label, color, x, y) {
        const div = document.createElement('div');
        div.className = 'bubble';
        div.textContent = label;

        Object.assign(div.style, {
            position: 'absolute',
            left: (x - radius) + 'px',
            top: (y - radius) + 'px',
            width: (2 * radius) + 'px',
            height: (2 * radius) + 'px',
            borderRadius: '50%',
            zIndex: 11,
            cursor: 'pointer',
            pointerEvents: 'auto',
            userSelect: 'none',

            /* ===== Á≠â‰ª∑ ctx.globalAlpha = 0.85 ===== */
            opacity: '0.85',

            /* ===== 1. Á≠â‰ª∑ createRadialGradient ===== */
            background: `
            radial-gradient(
                circle at ${radius * 0.7}px ${radius * 0.7}px,
                rgba(255,255,255,0.55) 0%,
                rgba(255,255,255,0.18) 40%,
                rgba(255,255,255,0.08) 100%
            )
            `,

            /* ===== ÁéªÁíÉÊäòÂ∞ÑÔºàcanvas Ê≤°ÊúâÔºå‰ΩÜËßÜËßâÂøÖÈ°ªÊúâÔºâ ===== */
            backdropFilter: 'blur(12px)',
            WebkitBackdropFilter: 'blur(12px)',

            /* ===== Á≠â‰ª∑ shadowColor + shadowBlur ===== */
            boxShadow: `0 0 24px ${color}`,

            /* ===== Á≠â‰ª∑ ctx.stroke ===== */
            border: '1.2px solid rgba(255,255,255,0.35)',

            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',

            font: 'bold 1.2rem -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif',
            color: 'rgba(255,255,255,0.95)',
        });

        /* ===== 3. È´òÂÖâÂèçÂ∞ÑÔºàÁ≠â‰ª∑ arc È´òÂÖâÔºâ ===== */
        const highlight = document.createElement('div');
        Object.assign(highlight.style, {
            position: 'absolute',
            inset: 0,
            borderRadius: '50%',
            pointerEvents: 'none',
            background: `
            conic-gradient(
                from 207deg at 35% 35%,
                rgba(255,255,255,0.45) 0deg,
                rgba(255,255,255,0.45) 30deg,
                transparent 55deg
            )
            `,
            maskImage: 'radial-gradient(circle, black 60%, transparent 61%)',
            WebkitMaskImage: 'radial-gradient(circle, black 60%, transparent 61%)'
        });

        div.appendChild(highlight);

        div.addEventListener('click', (e) => {
            window.location.href = label + '.html';
            e.stopPropagation();
        });

        bubbleContainer.appendChild(div);

        return {
            label,
            color,
            x,
            y,
            vx: (Math.random() - 0.5) * 2,
            vy: -2 - Math.random() * 2,
            div,
            stopped: false
        };
        }



    function nonOverlappingPosition(existing, radius) {
      let tries = 0;
      while (tries < 1000) {
        const x = Math.random() * (window.innerWidth - 2 * radius) + radius;
        const y = window.innerHeight - radius - Math.random() * 40;
        if (existing.every(b => Math.hypot(b.x - x, b.y - y) >= 2 * radius)) {
          return { x, y };
        }
        tries++;
      }
      return { x: radius + tries * 2, y: window.innerHeight - radius };
    }

    function initBubbles() {
      bubbleContainer.innerHTML = '';
      bubbles = [];
      for (let i = 0; i < bubbleLabels.length; i++) {
        const {x, y} = nonOverlappingPosition(bubbles, radius);
        bubbles.push(createBubble(bubbleLabels[i], colors[i % colors.length], x, y));
      }
    }
    initBubbles();

    function updateBubbles() {
      for (let i = 0; i < bubbles.length; i++) {
        let b = bubbles[i];
        if (b.stopped) continue;
        b.x += b.vx;
        b.y += b.vy;
        // Bounce off left/right
        if (b.x - radius < 0) { b.x = radius; b.vx *= -1; }
        if (b.x + radius > window.innerWidth) { b.x = window.innerWidth - radius; b.vx *= -1; }
        // Bounce off other bubbles
        for (let j = 0; j < bubbles.length; j++) {
          if (i === j) continue;
          let b2 = bubbles[j];
          let dx = b2.x - b.x, dy = b2.y - b.y, dist = Math.hypot(dx, dy);
          if (dist < 2 * radius) {
            const overlap = 2 * radius - dist;
            const angle = Math.atan2(dy, dx);
            b.x -= Math.cos(angle) * overlap / 2;
            b.y -= Math.sin(angle) * overlap / 2;
            b2.x += Math.cos(angle) * overlap / 2;
            b2.y += Math.sin(angle) * overlap / 2;
            b.vx *= -1; b.vy *= -1;
            b2.vx *= -1; b2.vy *= -1;
          }
        }
        // Bounce off bottom
        if (b.y + radius > window.innerHeight) { b.y = window.innerHeight - radius; b.vy *= -1; }
        // Stop at top
        if (b.y - radius <= 0) { b.y = radius; b.vx = 0; b.vy = 0; b.stopped = true; }
        // Update position
        b.div.style.left = (b.x - radius) + 'px';
        b.div.style.top = (b.y - radius) + 'px';
      }
    }

    function animateBubbles() {
      updateBubbles();
      requestAnimationFrame(animateBubbles);
    }
    animateBubbles();

    window.addEventListener('resize', () => {
      initBubbles();
    });

    console.log(`     _______________________
    < I am not Charlotte... >
     -----------------------
       \\     ||    ||  
         \\    \\\\()// 
             //(__)\\\\
            ||      ||`);

    window.addEventListener('DOMContentLoaded', function() {
        document.getElementById('infoPage').classList.add('active'); // slight delay to ensure transition
    });


  </script>

  <div id="hangman-game" style="display: flex; justify-content: space-between; align-items: center; margin-top: 200px; margin-left:50px;">
    <!-- Letter Input Section -->
    <div id="letter-input-section" style="width: 40%;">
      <p id="word-display" style="color:antiquewhite; font-size: 60px; letter-spacing: 8px;">_ _ _ _ _</p>
      <input id="letter-input" type="text" maxlength="1" style="color:antiquewhite; font-size: 60px; width: 150px; text-align: center;" />
      <p id="message" style="color: hsl(107, 84%, 30%); font-size: 32px;"></p>
    </div>

    <!-- Hangman Image Section -->
    <div id="hangman-image-section" style="width: 15%; text-align: center;">
      <img id="hangman-image" src="assets/mov1.png" alt="Hangman" style="width: 100%; max-width: 200px; height: auto;" />
    </div>
  </div>

  <script>
    const words = ["developer", "comedian"];
    let selectedWord = words[Math.floor(Math.random() * words.length)];
    let guessedWord = Array(selectedWord.length).fill("_");
    let mistakes = 0;

    const wordDisplay = document.getElementById("word-display");
    const letterInput = document.getElementById("letter-input");
    const message = document.getElementById("message");
    const hangmanImage = document.getElementById("hangman-image");

    wordDisplay.textContent = guessedWord.join(" ");

    // Update word display to allow clicking on underscores
    function updateWordDisplay() {
      wordDisplay.innerHTML = guessedWord
        .map((char, index) =>
          char === "_"
            ? `<span data-index="${index}" style="color:antiquewhite;">_</span>`
            : `<span>${char}</span>`
        )
        .join(" ");

      document.querySelectorAll("#word-display span[data-index]").forEach((span) => {
        span.addEventListener("click", () => {
          letterInput.focus();
        });
      });
    }

    // Initial call to update word display
    updateWordDisplay();

    let inputHistory = [];
    
    letterInput.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        const letter = letterInput.value.toLowerCase();
        letterInput.value = "";
        message.textContent = "";

        if (!letter || letter.length !== 1 || !/[a-z]/.test(letter)) {
          message.textContent = "Please enter a valid letter.";
          return;
        }

        if (selectedWord.includes(letter)) {
          for (let i = 0; i < selectedWord.length; i++) {
            if (selectedWord[i] === letter) {
              guessedWord[i] = letter;
            }
          }

          if (!guessedWord.includes("_")) {
            message.style.color = "white";
            message.textContent = "Congratulations! You won!";
            letterInput.disabled = true;
          }
        } else {
          mistakes++;
          hangmanImage.src = `assets/mov${mistakes + 1}.png`;

          if (mistakes === 6) {
            message.style.color = "white";
            message.textContent = `Game over! The word was: ${selectedWord}`;
            letterInput.disabled = true;
          }
        }

        updateWordDisplay();
      }
    });

    // Dynamically adjust the size of each hangman image based on the mistake count
    const imageSizes = [
        { maxWidth: "200px" },
        { maxWidth: "200px" },
        { maxWidth: "200px" },
        { maxWidth: "200px" },
        { maxWidth: "200px" },
        { maxWidth: "360px" },
        ];

    function updateHangmanImage() {
        hangmanImage.src = `assets/mov${mistakes + 1}.png`;
        const size = imageSizes[mistakes];
        hangmanImage.style.width = imageSizes[mistakes + 1].maxWidth;
        hangmanImage.style.height = "auto"; 
        }

    // Update the image and size whenever a mistake is made
    letterInput.addEventListener("keydown", (event) => {
        if (event.key !== "Enter") return;

        const letter = letterInput.value.toLowerCase();
        letterInput.value = "";
        message.textContent = "";
        
        // ËÆ∞ÂΩïËæìÂÖ•
        inputHistory.push(letter);

        if (!letter || letter.length !== 1 || !/[a-z]/.test(letter)) {
            message.textContent = "Please enter a valid letter.";
            return;
        }

        // üëâ ËßÑÂàô 1ÔºöÈáçÂ§çËæìÂÖ•Ê£ÄÊµã
        if (inputHistory.includes(letter)) {
            message.style.color = "white";
            message.textContent = "you should improve your memory";
            return;
        }


        // üëâ ËßÑÂàô 2ÔºöÂΩ©Ëõã emoo
        if (inputHistory.length >= 4) {
            const firstFour = inputHistory.slice(0, 4).join("");
            if (firstFour === "emoo") {
            message.style.color = "white";
            message.textContent = "Life lesson: don't use same trick for twice";
            }
        }

        // Ê≠£Â∏∏Ê∏∏ÊàèÈÄªËæë
        if (selectedWord.includes(letter)) {
            for (let i = 0; i < selectedWord.length; i++) {
            if (selectedWord[i] === letter) {
                guessedWord[i] = letter;
            }
            }

            if (!guessedWord.includes("_")) {
            message.style.color = "white";
            message.textContent = "congrats my dear friend, beat 100% visitors.";
            letterInput.disabled = true;
            }
        } else {
            mistakes++;
            updateHangmanImage();

            if (mistakes === 6) {
            message.style.color = "white";
            message.textContent = `Game over! The word was: ${selectedWord}`;
            letterInput.disabled = true;
            }
        }

        updateWordDisplay();
        });

  // Fix message updates for different cases
  letterInput.addEventListener("keydown", (event) => {
    if (event.key !== "Enter") return;

    const letter = letterInput.value.toLowerCase();
    letterInput.value = "";
    message.textContent = "";

    // Rule 1: Check for repeated input
    if (inputHistory.includes(letter)) {
      message.style.color = "white";
      message.textContent = "You already tried this letter. Try another one!";
      return;
    }

    inputHistory.push(letter);

    // Rule 2: Easter egg for "emoo"
    if (inputHistory.length >= 4) {
      const firstFour = inputHistory.slice(0, 4).join("");
      if (firstFour === "emoo") {
        message.style.color = "white";
        message.textContent = "Life lesson: don't use the same trick twice.";
      }
    }

    // Normal game logic
    if (selectedWord.includes(letter)) {
      for (let i = 0; i < selectedWord.length; i++) {
        if (selectedWord[i] === letter) {
          guessedWord[i] = letter;
        }
      }

      if (!guessedWord.includes("_")) {
        message.style.color = "white";
        message.textContent = "Congratulations! You won!";
        letterInput.disabled = true;
      }
    } else {
      mistakes++;

      if (mistakes === 6) {
        hangmanImage.style.display = "none"; // Hide the image
        message.style.color = "white";
        message.textContent = "Beauty, humour and intelligence";
        letterInput.disabled = true;
      } else {
        updateHangmanImage();
      }
    }

    updateWordDisplay();
  });
  </script>
</body>
</html>